Feedback Control: (2p) [currently 2 1/3p] 

4) Feedback Control                     (3p)
    4.1) Introduction                   (1.5p)
        - open-loop vs closed-loop
        - optimal control problem
    4.2) Methods for feedback control   (1.5p)
        - conventional methods:		PID
        	- algorithm
        	- advantages
        	- disadvantages
        - MPC for optimal feedback control
        	- algorithm
        	- advantages
        	- disadvantages
        - RL for optimal feedback control
        	- algorithm
        	- advantages disadvantages

todo: reference: section1.3, http://www.cim.mcgill.ca/~ialab/ev/Intro_control1.pdf 

\chapter{Feedback Control}
\label{ch:fc}

In control theory, there are two main types of control systems in existence, open-loop and closed-loop. An open-loop system involves only a one-way flow of control, which means that the control input is pre-decided based on the prior knowledge of the system and then there is no change in the control. For example, the control input for a washing machine is the time duration for one cycle so the machine will come to a halt by the end of cycle even if the task of washing is not completed successfully. A closed loop system, on the other hand, consists of sensors that can measure the output, sometimes partially, and use it as feedback to adapt to the control task. Open loop control can control a system accurately only if the entire model specification of the system is known beforehand, which is not the case for complex dynamic systems. Hence, the closed-loop strategies which adaptively modify the control behaviour are the main go-to strategies for complex dynamic systems.

\begin{figure}[h]%
    \centering
    {\includegraphics[width=7cm]{thesis/figures/feedback_control1.pdf}}%
    \caption{feedback control loop}%
    \label{fig:feedbackcontrol}%
\end{figure}
Feedback control is a typical closed-loop control system principle that involves influencing the future state behaviour of a system using its output in the form of feedback. A feedback control system is composed of controllers, plant/process, sensors, etc. Figure \ref{fig:feedbackcontrol} shows the block diagram of a basic feedback control system. Here, the controller takes as input the desired output response(r) and measurement of the previous state $y_m$ and aims to minimize the error between the two. The output of a controller is the control action $u$ that serves as input to the plant in the presence of some disturbances, as in the real-world scenario. The plant then updates the state of the system based on the control action $u$ and outputs a new state $y$ which is measured by the sensor and fed back into the controller for the next time step. The whole process is repeated indefinitely or until the system reaches the goal state. For example, consider a control system that adjusts the temperature of a room based on some comfort level using a fan as a controller. Such a system will take as input, the desired temperature value and the current temperature of the room. The controller will then predict actions that minimize the difference between the two inputs and update the actions based on the feedback from the system.

% add reference
\begin{figure}[h]%
    \centering
    \includegraphics[width=10cm]{thesis/figures/PID_feedback_control.pdf}
    \caption{PID feedback control}%
    \label{fig:pid}%
\end{figure}
Many different types of controllers exist following the principles of feedback control. One of the most common ones is a proportional integral derivative (PID) controller \cite{PID} which continuously calculates an error value $e(t)$ as the difference between the desired system response ($r$) and a measured system output ($y_m$) and applies a correction based on proportional, integral, and derivative terms. Fig \ref{fig:pid} shows PID controller in action. 

The P in PID controller stands for proportional error, $e(t) = K_p \cdot (r(t) - y_m(t))$, where $K_p$ is some constant. Here, the more the deviation from the desired state, more the error, hence the name proportional error. If the change is high, the error is going to be higher because of the constant $K_p$. The second term, I integral, takes into account the past error measurements and integrates them over time. For example, if there is an error after the implementation of proportional control, the integral term can be used to diminish or eliminate this error based on the cumulative values of past error measurements. The final term, D derivative, involves learning the future trend of error values based on how rapidly the error values are changing over a fixed time period. Finally, the output of the PID controller is the sum of all the three terms combined together \cite{PIDVSMPC},
\begin{equation*}
u(t) = K_p e(t) + K_i  \int_{0}^{t} e(\tau) \,d\tau + K_d \frac{de(t)}{dt}
\end{equation*}
where the non-negative, $K_p$,$K_i$,$K_d$, denote the coefficients for the proportional, integral, and derivative terms respectively. 

The main advantage of a PID controller is that it is simple as it only depends on the measurements of the plant and doesn't require any prior knowledge of the system But because of this simplicity, it is not suitable for controlling complex systems that depend on multiple input variables. Apart from this, the PID controller doesn't have the ability to deal with constraints \cite{PIDVSMPC2}.

Model predictive control (MPC) is a class of algorithms that aims at learning the model of a system and using it to predict the new state of the system and iteratively improve the model based on the feedback from the system. PID controllers are single input and single output (SISO) controllers while controllers in MPC are multiple inputs and multiple output controllers. MPC is considered an iterative finite-horizon optimization approach. For a time step of t, the MPC controller uses a sampled state to execute a control strategy for a finite time horizon $(t+Dt)$. For the future time step $t+1$, the state is sampled again and the calculations are repeated resulting in a new state and control parameters. This is done iteratively until optimal controller performance is achieved based on the defined objective. The prediction horizon keeps being shifted forward and for this reason, MPC is also called receding horizon control.

The primary advantage of MPC over PID is its ability to handle constraints and MIMO systems. But it also requires the model of a system which is not always possible for many complex dynamic systems. To overcome this we introduce, a technique of machine learning, reinforcement learning, that shows promising results just based on the data of the system without requiring a complete model of the system.

Reinforcement learning is a class of techniques related to machine learning that involves learning from interaction with an environment and has gained widespread popularity because of its promising results in the field of control. The environment in reinforcement learning could be any physical description of the real world e.g. road for self-driving cars, room for a cleaning robot, or an airfield for a self-driving drone. The learner or agent in RL interacts with the environment by performing actions carefully chosen using a learning policy. In return, the environment responds with a measure of how good the actions are which is called a reward. The general goal of the RL agent is to maximise this reward. It also follows the principle of feedback control as the reward from the environment acts as a feedback to the controller (agent) which affects the future predictions.

References
[1]Feedback control: https://www.researchgate.net/publication 276831282_How_to_model_and_prove_hybrid_systems_with_KeYmaera_a_tutorial_on_safety
[2]PID (ref: http://d-scholarship.pitt.edu/8171/1/AngLi20100628.pdf)
[3]PID vs MPC https://www.ijareeie.com/upload/2013/november/17_COMPARATIVE.pdf
[4]MPC (ref: https://eng.libretexts.org/Bookshelves/Industrial_and_Systems_Engineering/Book%3A_Chemical_Process_Dynamics_and_Controls_(Woolf)/12%3A_Multiple_Input_Multiple_Output_(MIMO)_Control/12.03%3A_MIMO_using_model_predictive_control#:~:text=handle%20structural%20changes.-,Disadvantages%20of%20MPC,not%20handle%20input%20disturbances%20well.)
